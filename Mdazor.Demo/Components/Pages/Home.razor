@page "/"
@using Markdig
@inject IServiceProvider ServiceProvider
<PageTitle>Mdazor Demo</PageTitle>

<div class="container mt-4">
    <h1>Mdazor Demo</h1>
    <p>This demonstrates Blazor components embedded in Markdown using Mdazor.</p>
    
    @((MarkupString) RenderedContent)
</div>

@code {
    string RenderedContent { get; set; } = string.Empty;
    
    protected override async Task OnInitializedAsync()
    {
        var pipeline = new MarkdownPipelineBuilder()
            .UseMdazor(ServiceProvider)

            .UseAutoLinks()
            .Build();
        
        var document = Markdown.Parse(_markdownContent, pipeline);
        RenderedContent = document.ToHtml(pipeline);

        await base.OnInitializedAsync();
    }

    private readonly string _markdownContent = @"
# Welcome to Mdazor

<Card title=""My Card"" subtitle=""Demo"">
# Markdown Heading

This is **bold** text and this is *italic*.

- List item 1
- List item 2
- https://github.com

<Alert type=""info"">
Nested component with **markdown** https://github.com!
</Alert>

More content here.
</Card>

## Another Section

<Alert type=""warning"">
This is a **warning** alert outside the card!
</Alert>


";
}